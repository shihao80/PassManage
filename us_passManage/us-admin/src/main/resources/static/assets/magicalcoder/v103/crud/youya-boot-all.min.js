/*制作方法参考YouyabootAllJsCompressTest.java*/
!function(){var c=layui.jquery,b=layui.form;var a={render:function(i,e,f){var h=f.inputname?f.inputname:"menuids[]";var g=f.layfilter?f.layfilter:"checkauth";var d=f.openall?f.openall:false;c(i).html(a.renderAuth(e,0,{inputname:h,layfilter:g,openall:d}));b.render();c(i).find(".auth-single:first").unbind("click").on("click",".layui-form-checkbox",function(){var k=c(this).prev();var j=k.is(":checked");var l=k.parent().next().find('input[type="checkbox"]').prop("checked",j);if(j){k.parents(".auth-child").prev().find('input[type="checkbox"]').prop("checked",true)}b.render("checkbox")});c(i).unbind("click").on("click",".auth-icon",function(){var j=c(this);var k=j.parent().parent().find(".auth-child:first");if(j.is(".active")){j.removeClass("active").html("&#xe623;");k.slideUp("fast")}else{j.addClass("active").html("&#xe625;");k.slideDown("fast")}return false})},renderAuth:function(d,i,f){var h=f.inputname;var g=f.layfilter;var e=f.openall;var j='<div class="auth-single">';layui.each(d,function(l,m){var n=m.list?1:0;var k=n?a.renderAuth(m.list,i+1,f):"";j+='<div><div class="auth-status"> '+(n?'<i class="layui-icon auth-icon '+(e?"active":"")+'" style="cursor:pointer;">'+(e?"&#xe625;":"&#xe623;")+"</i>":'<i class="layui-icon auth-leaf" style="opacity:0;">&#xe626;</i>')+(i>0?"<span>├─ </span>":"")+'<input type="checkbox" name="'+h+'" title="'+m.name+'" value="'+m.value+'" lay-skin="primary" lay-filter="'+g+'" '+(m.checked?'checked="checked"':"")+'> </div> <div class="auth-child" style="'+(e?"":"display:none;")+'padding-left:40px;"> '+k+"</div></div>"});j+="</div>";return j},getLeaf:function(f){var d=c(f).find(".auth-leaf").parent().find('input[type="checkbox"]:checked');var e=[];d.each(function(g,h){e.push(h.value)});return e},getAll:function(f){var d=c(f).find('input[type="checkbox"]');var e=[];d.each(function(g,h){e.push(h.value)});return e},getChecked:function(f){var d=c(f).find('input[type="checkbox"]:checked');var e=[];d.each(function(g,h){e.push(h.value)});return e},getNotChecked:function(f){var d=c(f).find('input[type="checkbox"]:not(:checked)');var e=[];d.each(function(g,h){e.push(h.value)});return e}};youyaboot_all.authtree=a}();
!function(){var b=layui.form,c=layui.jquery;var a={getParameter:function(d){var f=window.location.search.substring(1);if(f!=""){var g=f.split("&");for(var e=0;e<g.length;e++){var h=g[e].split("=");if(h.length=2){if(h[0]==d){return h[1]}}}}return null},escapeHTML:function(d){if(!d||d==null){return""}d=""+d;return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},autoSetImgUrl:function(g,e){if(typeof e=="undefined"||e+""==""){return}if(e.indexOf("http://")==0||e.indexOf("https://")==0){g.attr("src",e);return}var d=_GLOBAL.file.fileExtraAddPrefix;if(d!=""){var f=e.substr(0,d.length);if(f==d){e=e.substring(d.length)}}e=_GLOBAL.file.requestPrefix+"/"+e;g.attr("src",e)},mappingEntityToFormUiValue:function(e,d){var g=e;if(d){for(var l in d){var k=d[l];if(k!=null&&typeof k!="undefined"){var j=g.find("[name='"+l+"']");if(j.length<=0){continue}var m=j.attr("lay-skin");if(m&&m=="switch"){continue}var h=j.attr("class");if(h&&h.indexOf("magicalcoder-foreign-select2")!=-1){j.attr("data-value",k);continue}var i=j.attr("type");if(i&&i=="radio"&&k+""!=""){g.find("[name='"+l+"'][value='"+k+"']").prop("checked","checked");continue}var f=g.find(".img_"+l);if(f.length>0&&k!=""){this.autoSetImgUrl(f,k)}j.val(k)}}g.find("input[lay-skin='switch']").each(function(p,q){var o=c(q).attr("name");var n=(d[o]+""=="true"||d[o]+""=="1")?true:false;c(q).prop("checked",n)});b.render()}},};youyaboot_all.mc_util=a}();
!function(){var a={MC_LAY_CLASS_NAME:{FORM:{foreign_select2:"magicalcoder-foreign-select2",laydate:"magicalcoder-laydate",layupload:"magicalcoder-layupload",layedit:"magicalcoder-layedit",slider:"magicalcoder-slider",color_picker:"magicalcoder-color-picker",rate:"magicalcoder-rate",code:"magicalcoder-code"},TABLE:{single_select2:"magicalcoder-table-single-select2",foreign_select2:"magicalcoder-table-foreign-select2",lay_switch:"magicalcoder-table-layswitch",lay_date:"magicalcoder-table-laydate",text:"magicalcoder-table-text",radio:"magicalcoder-table-radio",}},QUERY_TYPE_EXPORT_EXCEL:1};youyaboot_all.mc_constant=a}();
!function(){var e=layui.jquery,d=parent.layer===undefined?layui.layer:top.layer;var b="layui-form-danger";var c="form-danger";var a={layuiVerify:{mc_required:function(h,g){var f=/[\S]+/;if(!f.test(h)){return"必填项不能为空"}},mc_phone:function(h,g){if(h&&h!=""){var f=/^1\d{10}$/;if(!f.test(h)){return"请输入正确的手机号"}}},mc_email:function(h,g){if(h&&h!=""){var f=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!f.test(h)){return"邮箱格式不正确"}}},mc_url:function(h,g){if(h&&h!=""){var f=/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/;if(!f.test(h)){return"链接格式不正确"}}},mc_number:function(f){if(f+""!=""&&isNaN(f)){return"只能填写数字"}},mc_date:function(h,g){if(h&&h!=""){var f=/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/;if(!f.test(h)){return"日期格式不正确"}}},mc_identity:function(h,g){if(h&&h!=""){var f=/(^\d{15}$)|(^\d{17}(x|X|\d)$)/;if(!f.test(h)){return"请输入正确的身份证号"}}}},magicalVerify:{mc_digits:function(h,g){if(h&&h!=""){var f=/^[-+]?\d*$/;if(!f.test(h)){return"必须为整数"}}},mc_chinese_character:function(h,g){if(h&&h!=""){var f=/[\u4e00-\u9fa5]+/;if(!f.test(h)){return"请使用中文汉字"}}},mc_variable:function(h,g){if(h&&h!=""){var f=/[A-Za-z0-9_]+/;if(!f.test(h)){return"请使用字母数字下划线组合"}}},magicalCoderVerify:function(m,n){if(m&&m!=""){if(!(n instanceof layui.jquery)){n=e(n)}var l=n.attr("magicalcoder-verify");if(l&&l!=""){var f=l.split("|");if(f.length>0){for(var j=0;j<f.length;j++){var k=f[j];if(k!=""){var p=k.split("=");if(p.length==2){var o=p[0];var h=p[1];switch(o){case"maxValues":if(!isNaN(m)&&!isNaN(h)){if(parseFloat(m)>parseFloat(h)){return"最大值 "+h}}break;case"minValues":if(!isNaN(m)&&!isNaN(h)){if(parseFloat(m)<parseFloat(h)){return"最小值 "+h}}break;case"minLength":if(m.length<parseInt(h)){return"最小长度 "+h}break;case"maxLength":if(m.length>parseInt(h)){return"最大长度 "+h}break;case"definedOne":case"definedTwo":case"definedThree":var g=new RegExp(h,"g");if(!a.regExpMatch(g,m)){return"不满足 "+h}break}}}}}}}}},regExpMatch:function(h,g){var f=g.match(h);if(f){return f[0]==g}return false},clearDangerClass:function(f){if(f.hasClass("magicalcoder-foreign-select2")||f.hasClass("magicalcoder-table-single-select2")){var g=f.parent();if(g){g.find(".select2-selection--single").removeClass(c)}}else{if(f.hasClass("magicalcoder-layedit")){var g=f.parent();if(g){g.find(".layui-layedit").removeClass(c)}}else{if(f.is("select")){var g=f.parent();if(g){g.find("input.layui-unselect").removeClass(b)}}else{f.removeClass(b)}}}},verify:function(m,n){var l=this.layuiVerify;var h=this.magicalVerify;var i=e.extend(l,h);var p=n.attr("lay-verify");if(p){for(var j in i){if(("|"+p+"|").indexOf("|"+j+"|")!=-1){var o=i[j];var g=o(m,n);if(g&&g.length>0){d.msg(g,{icon:5,shift:6});if(n.hasClass("magicalcoder-foreign-select2")||n.hasClass("magicalcoder-table-single-select2")){var k=n.parent();if(k){var f=k.find(".select2-selection--single");f.addClass(c);f.focus()}}else{if(n.hasClass("magicalcoder-layedit")){var k=n.parent();if(k){var f=k.find(".layui-layedit");f.addClass(c);f.focus()}}else{if(n.is("select")){var k=n.parent();if(k){var f=k.find("input.layui-unselect");f.addClass(b);f.focus()}}else{n.addClass(b);n.focus()}}}return false}}}}this.clearDangerClass(n);return true}};youyaboot_all.mc_verify=a}();
!function(){var d=layui.jquery,c=parent.layer===undefined?layui.layer:top.layer,b=youyaboot_all.mc_verify;var a={listToMap:function(k,g){var j={};if(g&&g.length>0){for(var e=0;e<g.length;e++){var h=g[e];var f=h[k]+"";j[f]=h}}return j},isSelectElem:function(e){if(!e.is("select")){return false}return true},bindTableSingleSelect2:function(g,f,e,h,j){e=e||{width:"150px",allowClear:false};var i=f.attr("placeholder")||"搜索";f.select2({placeholder:i,width:e.width,allowClear:e.allowClear});this._bindTableSelect2AjaxChangeValueEvent(g,f,h,j)},bindForeignSelect2ByDomId:function(g,f,e,h,i){e=e||{allowClear:true,width:"150px"};this._buildForeignSelect2(f,e);this._bindTableSelect2AjaxChangeValueEvent(g,f,h,i)},_buildForeignSelect2:function(f,e){var h=this;if(!this.isSelectElem(f)){return}var g=f.attr("placeholder")||"搜索";f.select2({allowClear:e.allowClear||true,placeholder:g,width:e.width||"150px",delay:500,ajax:{url:function(m){var l=d(this).attr("data-url");var k=d(this).attr("data-id");var j=d(this).attr("data-text-fields");var i={dataId:k,fields:j};m.extra=i;return l},data:function(k){var i=d(this).attr("data-limit");i=i?parseInt(i):20;var j=k.term;if(j&&j!=""){return{keyword:j,limit:i}}else{return{limit:i}}},processResults:function(n,o,l){if(n.flag){var k=o.extra.dataId;var j=o.extra.fields;var m=n.data;var i=h._buildSelect2IdTextData(m,k,j);return{results:i}}else{c.msg("获取数据失败:"+n.desc)}return{results:[]}}}})},batchTryToAjaxSetSelect2Content:function(e){var h=this;var f={};e.each(function(t,w){var u=d(w);var s=u.attr("data-value");if(s&&s!=""){var r=u.attr("data-url");var i=u.attr("data-id");var q=u.attr("data-text-fields");var v=f[r];var p={selectDom:u,uniqueField:i,uniqueValue:s,showTextFields:q};if(v==null||typeof v=="undefined"){v=[p];f[r]=v}else{v.push(p)}}});for(var k in f){var o=f[k];var m=[];var j={};for(var g=0;g<o.length;g++){var n=o[g].uniqueValue;if(n+""!=""&&j[n]+""!="1"){m.push(n);j[n]="1"}}var l=o[0];h._ajaxUpdateSelectText(o,k,l,m)}},_ajaxUpdateSelectText:function(h,g,f,j){var e=f.uniqueField;var i=this;d.getJSON(g,{uniqueField:e,uniqueValue:j,date:new Date().getTime()},function(n){if(n.flag){var k=n.data;var r=i.listToMap(e,k);for(var o=0;o<h.length;o++){var q=h[o];var u=q.uniqueField;var v=q.uniqueValue;var l=q.showTextFields;var m=r[v];var t=q.selectDom;var s=i._buildItemTextData(m,u,l);if(i.isSelectElem(t)){var p=new Option(s.text,s.id,true,true);t.append(p)}else{if(t.is("input")||t.is("textarea")){t.val(s.text)}else{t.html(s.text)}}}}})},_buildItemTextData:function(g,i,j){var l=g[i];var h=[];if(j!=""){var e=j.split(",");for(var f=0;f<e.length;f++){h.push(g[e[f]])}}else{h.push(l)}return{id:l,text:h.join("||")}},_buildSelect2IdTextData:function(i,h,k){var g=[];if(i){for(var f=0;f<i.length;f++){var e=i[f];g.push(this._buildItemTextData(e,h,k))}}return g},_triggerCallback:function(h,m,i,n,l){h.attr("data-value",m);var g={event:{select2Change:function(p,o,q){}}};d.extend(true,g,l||{});g.event.select2Change(h,h.attr("name"),m);if(m==""){return}var j=h.attr("data-identify");if(j&&j!=""){var e=h.attr("name");var k=c.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var f={};f[e]=m;if(!b.verify(m,h)){return}d.post("admin/"+i+"/update/"+j,f,function(o){c.close(k);if(o.flag){c.msg("修改成功！")}else{c.msg("修改失败:"+o.desc);if(n){n()}}})}},_bindTableSelect2AjaxChangeValueEvent:function(f,e,h,i){if(!this.isSelectElem(e)){return}var g=this;e.on("select2:clear",function(j){g._triggerCallback(d(this),"",f,h,i)});e.on("select2:select",function(j){g._triggerCallback(d(this),j.params.data.id,f,h,i)})}};youyaboot_all.mc_select2=a}();
!function(){var c=layui.jquery,a=parent.layer===undefined?layui.layer:top.layer;var b={paintBody:function(d,f){var e=this;c.getJSON("admin/rest_rmp/get_permission_list?moduleName="+d,{date:new Date().getTime()},function(l){if(l.flag){if(l.data){var p=l.data.sysPermissionDtoList;if(p!=null&&p.length>0){for(var j=0;j<p.length;j++){var g=p[j];if(g&&g!=null){var n=g.frontDom;if(n!=null&&n!=""){n=n.replace("，",",");var m=n.split(",");for(var h=0;h<m.length;h++){if(!g.hasPermission){c(m[h]).addClass("security-hide")}else{var o=g.frontAction;if(o&&o!=null&&o!=""){if(o=="disabled"){c(m[h]).find("input").attr("disabled","disabled");c(m[h]).find("select").attr("disabled","disabled");c(m[h]).find("select").css("pointer-events","none");c(m[h]).find("textarea").attr("disabled","disabled");c(m[h]).find("button").attr("disabled","disabled");c(m[h]).find("a").css("pointer-events","none")}}}}}}}}}}else{a.alert("获取此模块下的权限失败:"+l.desc)}if(f){f()}c("body").removeClass("layui-hide")})}};youyaboot_all.mc_rmp=b}();
!function(){var form=layui.form,$=layui.jquery,layer=parent.layer===undefined?layui.layer:top.layer,upload=layui.upload,slider=layui.slider,rate=layui.rate,colorpicker=layui.colorpicker,layedit=layui.layedit,laydate=layui.laydate,mc_verify=youyaboot_all.mc_verify,mc_constant=youyaboot_all.mc_constant,mc_util=youyaboot_all.mc_util,mc_select2=youyaboot_all.mc_select2;var mc_layui_component={bindMagicalCoderLayUiComponentFromDetail:function(config){var _t=this;this.config=config;this._bindDate("."+mc_constant.MC_LAY_CLASS_NAME.FORM.laydate);this._bindUpload("."+mc_constant.MC_LAY_CLASS_NAME.FORM.layupload);$("."+mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2).each(function(index,item){_t._bindForeignSelect2(config.tableNameRest,$(this),{width:"100%"},config)});mc_select2.batchTryToAjaxSetSelect2Content($("."+mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2));this._bindSlider("."+mc_constant.MC_LAY_CLASS_NAME.FORM.slider);this._bindColorPicker("."+mc_constant.MC_LAY_CLASS_NAME.FORM.color_picker);this._bindRate("."+mc_constant.MC_LAY_CLASS_NAME.FORM.rate);this._bindCode("."+mc_constant.MC_LAY_CLASS_NAME.FORM.code);var formVerifyEditData=this._bindEdit("."+mc_constant.MC_LAY_CLASS_NAME.FORM.layedit);return formVerifyEditData},bindMagicalCoderLayUiComponentFromTable:function(config,failCallBack){this.config=config;var _t=this;var configData={width:"200px",allowClear:false};$("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.single_select2).each(function(index,item){_t._bindSingleSelect2(config.tableNameRest,$(this),configData,failCallBack,config)});$("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.foreign_select2).each(function(index,item){_t._bindForeignSelect2(config.tableNameRest,$(this),configData,failCallBack,config)});mc_select2.batchTryToAjaxSetSelect2Content($("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.foreign_select2));this._bindSwitchAjaxUpdate("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.lay_switch,failCallBack);this._bindDate("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.lay_date,failCallBack);this._bindInputText("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.text,failCallBack);this._bindRadio("."+mc_constant.MC_LAY_CLASS_NAME.TABLE.radio,failCallBack)},bindMagicalCoderLayUiComponentFromQuery:function(config){this.config=config;var _t=this;$("."+mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2).each(function(index,item){_t._bindForeignSelect2(config.tableNameRest,$(this),{width:"resolve",allowClear:true},null,config)});mc_select2.batchTryToAjaxSetSelect2Content($("."+mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2));this._bindDate("."+mc_constant.MC_LAY_CLASS_NAME.FORM.laydate)},_bindRadio:function(elem,clickFailCallback){var tableNameRest=this.config.tableNameRest;$(elem).each(function(index,item){var name=$(item).attr("name");var arr=name.split("_");name=arr[0];var id=$(item).attr("id");var filter=$(item).attr("lay-filter");var select=name?name:id;form.on("radio("+filter+")",function(domData){var _t=$(this);var identify=_t.attr("data-identify");if(identify&&identify!=""){var value=domData.elem.value;var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};postData[select]=value;if(!mc_verify.verify(value,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){layer.msg("修改成功！")}else{layer.msg("修改失败:"+data.desc);if(clickFailCallback){clickFailCallback()}}form.render("radio")})}})})},_bindInputText:function(inputElem,failCallBack){var tableNameRest=this.config.tableNameRest;$(inputElem).each(function(index,item){var originValue="";$(item).focus(function(){originValue=$(this).val()});$(item).blur(function(){var newValue=$(this).val();if(originValue!=newValue){var identify=$(item).attr("data-identify");if(identify&&identify!=""){var name=$(item).attr("name");var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};postData[name]=newValue;if(!mc_verify.verify(newValue,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){layer.msg("修改成功！")}else{layer.msg("修改失败:"+data.desc);$(item).val(originValue)}})}}})})},_bindDate:function(elem,doneFailCallback){var tableNameRest=this.config.tableNameRest;var _t=this;$(elem).each(function(index,item){var id=$(item).attr("id");var name=$(item).attr("name");var formConfig={};$.extend(true,formConfig,_t.config.form);var formRenderConfig={};if(formConfig[name]){formRenderConfig=formConfig[name].renderConfig}else{var realName=null;var dataName=$(item).attr("data-name");if(dataName&&dataName.length>0){realName=dataName}else{if(name.lastIndexOf("First")!=-1){realName=name.substring(0,name.lastIndexOf("First"))}if(name.lastIndexOf("Second")!=-1){realName=name.substring(0,name.lastIndexOf("Second"))}}if(realName!=null){if(formConfig[realName]){formRenderConfig=formConfig[realName].renderConfig}}}var domRenderConfig=_t.iteratorAttr({},item);var options=$.extend(true,domRenderConfig,formRenderConfig);var select=id?"#"+id:"[name='"+name+"']";var identify=$(item).attr("data-identify");var value=$(item).val();if(value&&value!=""){var reg=/^(\d{4})[-\/].*/;if(!reg.test(value)){try{if(value.toUpperCase()=="CURRENT_TIMESTAMP"){value=new Date()}else{value=eval(value)}}catch(e){value=""}}}$.extend(options,{elem:options.elem||select,type:options.type||"datetime",value:options.value||value,format:options.format||"yyyy-MM-dd HH:mm:ss",trigger:options.trigger||"click",done:options.done||function(value,date,endDate){if(identify&&identify!=""){var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};postData[name]=value;if(!mc_verify.verify(value,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){layer.msg("修改成功！")}else{layer.msg("修改失败！"+data.desc);if(doneFailCallback){doneFailCallback()}}})}}});laydate.render(options)})},_bindUpload:function(elem,doneFailCallback){var _t=this;$(elem).each(function(index,item){var name=$(item).attr("name");var inputName=name.replace("FileUpload","");var options=_t._options(item);var inputNameItem=$("input[name='"+inputName+"']");$.extend(options,{elem:options.elem||$(item),url:options.url||"admin/common_file_rest/upload",method:options.method||"post",accept:options.accept||"file",before:options.before||function(obj){layer.load()},done:options.done||function(res,index,upload){layer.closeAll("loading");if(res.flag){var src=res.data.src;inputNameItem.val(src);mc_util.autoSetImgUrl($(".img_"+inputName),src)}else{layer.alert("上传失败:"+res.desc);if(doneFailCallback){doneFailCallback()}}},error:options.error||function(index,upload){layer.closeAll("loading");layer.alert("上传失败，请重试");if(doneFailCallback){doneFailCallback()}}});upload.render(options)})},_bindSingleSelect2:function(tableNameRest,$elem,select2ConfigData,selectChangeFailCallback,config){mc_select2.bindTableSingleSelect2(tableNameRest,$elem,select2ConfigData,selectChangeFailCallback,config)},_bindForeignSelect2:function(tableNameRest,$elem,select2ConfigData,selectChangeFailCallback,config){mc_select2.bindForeignSelect2ByDomId(tableNameRest,$elem,select2ConfigData,selectChangeFailCallback,config)},_bindSwitchAjaxUpdate:function(elem,doneFailCallback){var tableNameRest=this.config.tableNameRest;$(elem).each(function(index,item){var name=$(item).attr("name");var id=$(item).attr("id");var filter=$(item).attr("lay-filter");var select=name?name:id;form.on("switch("+filter+")",function(domData){var _t=$(this);var identify=_t.attr("data-identify");if(identify&&identify!=""){var targetChecked=domData.elem.checked;var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};var value=targetChecked?1:0;postData[select]=value;if(!mc_verify.verify(value,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){_t.prop("checked",targetChecked);layer.msg("修改成功！")}else{layer.msg("修改失败:"+data.desc);_t.prop("checked",!targetChecked)}form.render("checkbox")})}})})},_bindEdit:function(elem){var formVerifyEditData={};$(elem).each(function(index,item){var id=$(item).attr("id");var editIndex=layedit.build(id,{height:300,uploadImage:{type:"post",url:"admin/common_file_rest/upload?from=layedit"}});formVerifyEditData[id+"VerifyEdit"]=function(val){layedit.sync(editIndex)}});return formVerifyEditData},_options:function(item){var name=$(item).attr("name");var domRenderConfig=this.iteratorAttr({},item);var formConfig={};$.extend(true,formConfig,this.config.form);var formRenderConfig=formConfig[name]?formConfig[name].renderConfig:{};var options=$.extend(true,domRenderConfig,formRenderConfig);return options},_bindSlider:function(elem){var _t=this;$(elem).each(function(index,item){var name=$(item).attr("name");var inputName=name.replace("Slider","");var options=_t._options(item);var inputNameItem=$("input[name='"+inputName+"']");var value=inputNameItem.val();$.extend(options,{elem:options.elem||$(item),value:options.value||value,change:options.change||function(value){inputNameItem.val(value)}});slider.render(options)})},_bindColorPicker:function(elem,doneFailCallback){var tableNameRest=this.config.tableNameRest;var _t=this;$(elem).each(function(index,item){var name=$(item).attr("name");var inputName=name.replace("ColorPicker","");var options=_t._options(item);var inputNameItem=$("input[name='"+inputName+"']");var value=inputNameItem.val();var identify=$(item).attr("data-identify");$.extend(options,{elem:options.elem||select,format:options.format||"hex",color:options.color||value,done:options.done||function(color){$(item).val(color);if(identify&&identify!=""){var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};postData[name]=color;if(!mc_verify.verify(color,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){layer.msg("修改成功！")}else{layer.msg("修改失败！"+data.desc);if(doneFailCallback){doneFailCallback()}}})}}});colorpicker.render(options)})},_bindRate:function(elem,doneFailCallback){var tableNameRest=this.config.tableNameRest;var _t=this;$(elem).each(function(index,item){var name=$(item).attr("name");var inputName=name.replace("Rate","");var options=_t._options(item);var inputNameItem=$("input[name='"+inputName+"']");var value=inputNameItem.val();var identify=$(item).attr("data-identify");$.extend(options,{elem:options.elem||$(item),length:options.length||5,value:options.value||value,theme:options.theme||"#FFB800",half:options.half||false,text:options.text||false,readonly:options.readonly||false,choose:options.choose||function(val){inputNameItem.val(val);if(identify&&identify!=""){var index=layer.msg("修改中，请稍候",{icon:16,time:true,shade:0.8});var postData={};postData[name]=val;if(!mc_verify.verify(val,$(item))){return}$.post("admin/"+tableNameRest+"/update/"+identify,postData,function(data){layer.close(index);if(data.flag){layer.msg("修改成功！")}else{layer.msg("修改失败！"+data.desc);if(doneFailCallback){doneFailCallback()}}})}}});rate.render(options)})},_bindCode:function(elem,doneFailCallback){var _t=this;$(elem).each(function(index,item){var name=$(item).attr("name");var inputName=name.replace("Code","");var options=_t._options(item);var inputNameItem=$("textarea[name='"+inputName+"']");var value=inputNameItem.val();$(elem).html(value);$.extend(options,{elem:elem,title:options.title||"",height:options.height||"200px",encode:options.encode||true,skin:options.skin||"notepad",about:options.about||false});layui.code(options)})},iteratorAttr:function(renderConfig,dom){var attrs=dom.attributes;for(var i=0;i<attrs.length;i++){var attr=attrs[i];var name=attr.name;var value=attr.value;if(name.indexOf("mc-")==0){name=name.replace("mc-attr-","");name=name.replace("mc-event-","");value=="true"?value=true:value=value;value=="false"?value=false:value=value;renderConfig[this.htmlAttrNameToTuoFeng(name)]=value}}return renderConfig},htmlAttrNameToTuoFeng:function(name){var arr=name.split("-");var newArr=[];for(var i in arr){if(i!=0){if(arr[i]!=""){newArr.push(this.firstCharToUpLower(arr[i]))}}else{newArr.push(arr[i])}}return newArr.join("")},firstCharToUpLower:function(name){var arr=name.split("");arr[0]=arr[0].toUpperCase();return arr.join("")},_bindLayer:function(){var _t=this;$(".magicalcoder-layer").each(function(idx,item){$(this).next().hide();$(this).click(function(){var config=_t.iteratorAttr({elem:$(item)},item);var type=config.type;if(type+""==1){config.content=$(this).next()}if(config.btn){config.btn=config.btn.split(",")}if(config.area){config.area=config.area.split(",")}layer.open(config)})})},magicalcoderMjeRender:function(){var scriptIdAttrName="magicalcoder-mje-script-id";$("["+scriptIdAttrName+"]").each(function(idx,item){if(!$(this).is("code")){var value=$(this).attr(scriptIdAttrName);var scriptCodeDome=$("["+scriptIdAttrName+"='script-"+value+"']");if(scriptCodeDome.length>0){var scriptJson=scriptCodeDome.html();if(scriptJson!=""){var jsonObj=JSON.parse(scriptJson);var event=jsonObj.event;var executeList=jsonObj.execute;$(this).bind(event,function(){for(var i=0;i<executeList.length;i++){var execute=executeList[i];var executeType=execute.executeType;switch(executeType){case"show":$(execute.target).show();break;case"hide":$(execute.target).hide();break;case"toggle":$(execute.target).toggle();break;case"remove":$(execute.target).remove();break;case"redirect":window.location.href=execute.target;break;case"reload":window.location.reload();break;case"fadeIn":$(execute.target).fadeIn();break;case"fadeOut":$(execute.target).fadeOut();break;case"fadeToggle":$(execute.target).fadeToggle();break;case"slideDown":$(execute.target).slideDown();break;case"slideUp":$(execute.target).slideUp();break;case"slideToggle":$(execute.target).slideToggle();break;case"html":$(execute.target).html("");break;case"val":$(execute.target).val("");break;case"submit":$(execute.target).submit();break;default:console.log("未知类型"+executeType);break}}})}}}})}};youyaboot_all.mc_layui_component=mc_layui_component}();
!function(){element=layui.element;$=layui.jquery,mc_util=youyaboot_all.mc_util,mc_constant=youyaboot_all.mc_constant,laytpl=layui.laytpl;mcForeignName=mc_util.getParameter("mcForeignName");mcForeignValue=mc_util.getParameter("mcForeignValue");var a={buildForeignParam:function(){if(mcForeignName!=""){return"&mcForeignName="+mcForeignName+"&mcForeignValue="+mcForeignValue}return""},_disableForeignDom:function(c,b,d){var e=$("[name='"+c+"']");if(e.length<=0){return}e.each(function(f,h){var j=$(h);if(j&&j.hasClass(b)){var i=j.attr("data-value")||"";if(i==""){var g='<option selected="selected" value="'+mcForeignValue+'">'+mcForeignValue+"</option>";j.append(g);j.val(mcForeignValue);if(d){j.attr("data-value",mcForeignValue)}}}else{j.val(mcForeignValue)}j.attr("disabled","disabled")})},disabledFromQueryParentArea:function(){if(mcForeignName&&mcForeignName!=""){$("button[type='reset']").hide();this._disableForeignDom(mcForeignName+"First",mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2,true);this._disableForeignDom(mcForeignName+"Second",mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2,true);return true}return false},disabledTableParentArea:function(){if(mcForeignName&&mcForeignName!=""){this._disableForeignDom(mcForeignName,mc_constant.MC_LAY_CLASS_NAME.TABLE.foreign_select2,false)}},disabledFormParentArea:function(){if(mcForeignName&&mcForeignName!=""){$("button[type='reset']").hide();this._disableForeignDom(mcForeignName,mc_constant.MC_LAY_CLASS_NAME.FORM.foreign_select2,true)}},buildTabTemplate:function(b,d,e){var c=laytpl('<div class="layui-tab mcChildrenPage" lay-filter="tabClick">                  <ul class="layui-tab-title">{{# layui.each(d.childrenPage,function(index,item){  }}                       <li {{# if(index==0){ }}class="layui-this" {{# } }}>{{ item.tabTitle }}</li>{{#  }); }}               </ul>        <div class="layui-tab-content">{{# layui.each(d.childrenPage,function(index,item){  }}   {{# if(index==0){ }}            <div class="layui-tab-item layui-show">                <iframe class="childrenIframe" src="{{ item.url }}?mcForeignName={{ item.mcForeignName }}&mcForeignValue={{ d.identify }} "></iframe>            </div>   {{# }else{ }}            <div class="layui-tab-item">                <iframe class="childrenIframe" futureSrc="{{ item.url }}?mcForeignName={{ item.mcForeignName }}&mcForeignValue={{ d.identify }} "></iframe>            </div>   {{# } }}{{#  }); }}    </div></div>').render({tableName:b,identify:d,childrenPage:e});return c},tabClickEvent:function(){var b={};element.on("tab(tabClick)",function(d){if(d.index!=0){var c=d.index+"";if(!b[c]){b[c]=true;var f=$(".mcChildrenPage").find(".childrenIframe").eq(c);var e=f.attr("src");if(!e||e==""){f.attr("src",f.attr("futureSrc"))}}}})}};youyaboot_all.mc_children=a}();
